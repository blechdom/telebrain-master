
<html></html>
<body>
  <table width="100%" border="1">
    <tr>
      <td width="75%">
        <pre><code><span class="c">/**</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code><span class="c"> * Sort functions, Normalize and prepare sort parameters</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code><span class="c"> */</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code><span class="k">var</span> formatSortValue <span class="k">=</span> exports<span class="k">.</span>formatSortValue <span class="k">=</span> <span class="k">function</span><span class="k">(</span>sortDirection<span class="k">)</span> <span class="k">{</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>  <span class="k">var</span> value <span class="k">=</span> <span class="k">(</span><span class="s">""</span> <span class="k">+</span> sortDirection<span class="k">).</span>toLowerCase<span class="k">();</span></code></pre>
      </td>
      <td width="25%">test/connection/message_parser_test.js :: Should correctly parse perfectly aligned message from socket<br/><br/>
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>  <span class="k">switch</span> <span class="k">(</span>value<span class="k">)</span> <span class="k">{</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>    <span class="k">case</span> <span class="s">'ascending'</span><span class="k">:</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>    <span class="k">case</span> <span class="s">'asc'</span><span class="k">:</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>    <span class="k">case</span> <span class="s">'1'</span><span class="k">:</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>      <span class="k">return</span> <span class="s">1</span><span class="k">;</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>    <span class="k">case</span> <span class="s">'descending'</span><span class="k">:</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>    <span class="k">case</span> <span class="s">'desc'</span><span class="k">:</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>    <span class="k">case</span> <span class="s">'-1'</span><span class="k">:</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>      <span class="k">return</span> <span class="k">-</span><span class="s">1</span><span class="k">;</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>    <span class="k">default</span><span class="k">:</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>      <span class="k">throw</span> <span class="k">new</span> Error<span class="k">(</span><span class="s">"Illegal sort clause, must be of the form "</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>                    <span class="k">+</span> <span class="s">"[['field1', '(ascending|descending)'], "</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>                    <span class="k">+</span> <span class="s">"['field2', '(ascending|descending)']]"</span><span class="k">);</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>  <span class="k">}</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code><span class="k">}</span><span class="k">;</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code><span class="k">var</span> formattedOrderClause <span class="k">=</span> exports<span class="k">.</span>formattedOrderClause <span class="k">=</span> <span class="k">function</span><span class="k">(</span>sortValue<span class="k">)</span> <span class="k">{</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>  <span class="k">var</span> orderBy <span class="k">=</span> <span class="k">{}</span><span class="k">;</span></code></pre>
      </td>
      <td width="25%">test/connection/message_parser_test.js :: Should correctly parse perfectly aligned message from socket<br/><br/>
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>  <span class="k">if</span> <span class="k">(</span>Array<span class="k">.</span>isArray<span class="k">(</span>sortValue<span class="k">))</span> <span class="k">{</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>    <span class="k">for</span><span class="k">(</span><span class="k">var</span> i <span class="k">=</span> <span class="s">0</span><span class="k">;</span> i <span class="k">&lt;</span> sortValue<span class="k">.</span>length<span class="k">;</span> i<span class="k">++)</span> <span class="k">{</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>      <span class="k">if</span><span class="k">(</span>sortValue<span class="k">[</span>i<span class="k">].</span>constructor <span class="k">==</span> String<span class="k">)</span> <span class="k">{</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>        orderBy<span class="k">[</span>sortValue<span class="k">[</span>i<span class="k">]]</span> <span class="k">=</span> <span class="s">1</span><span class="k">;</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>      <span class="k">}</span> <span class="k">else</span> <span class="k">{</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>        orderBy<span class="k">[</span>sortValue<span class="k">[</span>i<span class="k">][</span><span class="s">0</span><span class="k">]]</span> <span class="k">=</span> formatSortValue<span class="k">(</span>sortValue<span class="k">[</span>i<span class="k">][</span><span class="s">1</span><span class="k">]);</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>      <span class="k">}</span>      </code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>    <span class="k">}</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>  <span class="k">}</span> <span class="k">else</span> <span class="k">if</span><span class="k">(</span>Object<span class="k">.</span>prototype<span class="k">.</span>toString<span class="k">.</span>call<span class="k">(</span>sortValue<span class="k">)</span> <span class="k">===</span> <span class="s">'[object Object]'</span><span class="k">)</span> <span class="k">{</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>    orderBy <span class="k">=</span> sortValue<span class="k">;</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>  <span class="k">}</span> <span class="k">else</span> <span class="k">if</span> <span class="k">(</span>sortValue<span class="k">.</span>constructor <span class="k">==</span> String<span class="k">)</span> <span class="k">{</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>    orderBy<span class="k">[</span>sortValue<span class="k">]</span> <span class="k">=</span> <span class="s">1</span><span class="k">;</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>  <span class="k">}</span> <span class="k">else</span> <span class="k">{</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>    <span class="k">throw</span> <span class="k">new</span> Error<span class="k">(</span><span class="s">"Illegal sort clause, must be of the form "</span> <span class="k">+</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>      <span class="s">"[['field1', '(ascending|descending)'], ['field2', '(ascending|descending)']]"</span><span class="k">);</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>  <span class="k">}</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>  <span class="k">return</span> orderBy<span class="k">;</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code><span class="k">}</span><span class="k">;</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>exports<span class="k">.</span>encodeInt <span class="k">=</span> <span class="k">function</span><span class="k">(</span>value<span class="k">)</span> <span class="k">{</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>  <span class="k">var</span> buffer <span class="k">=</span> <span class="k">new</span> Buffer<span class="k">(</span><span class="s">4</span><span class="k">);</span></code></pre>
      </td>
      <td width="25%">test/connection/message_parser_test.js :: Should correctly parse perfectly aligned message from socket<br/><br/>
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>  buffer<span class="k">[</span><span class="s">3</span><span class="k">]</span> <span class="k">=</span> <span class="k">(</span>value <span class="k">&gt;&gt;</span> <span class="s">24</span><span class="k">)</span> <span class="k">&amp;</span> <span class="s">0xff</span><span class="k">;</span>      </code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>  buffer<span class="k">[</span><span class="s">2</span><span class="k">]</span> <span class="k">=</span> <span class="k">(</span>value <span class="k">&gt;&gt;</span> <span class="s">16</span><span class="k">)</span> <span class="k">&amp;</span> <span class="s">0xff</span><span class="k">;</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>  buffer<span class="k">[</span><span class="s">1</span><span class="k">]</span> <span class="k">=</span> <span class="k">(</span>value <span class="k">&gt;&gt;</span> <span class="s">8</span><span class="k">)</span> <span class="k">&amp;</span> <span class="s">0xff</span><span class="k">;</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>  buffer<span class="k">[</span><span class="s">0</span><span class="k">]</span> <span class="k">=</span> value <span class="k">&amp;</span> <span class="s">0xff</span><span class="k">;</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>  <span class="k">return</span> buffer<span class="k">;</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code><span class="k">}</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>exports<span class="k">.</span>encodeIntInPlace <span class="k">=</span> <span class="k">function</span><span class="k">(</span>value<span class="k">,</span> buffer<span class="k">,</span> index<span class="k">)</span> <span class="k">{</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>  buffer<span class="k">[</span>index <span class="k">+</span> <span class="s">3</span><span class="k">]</span> <span class="k">=</span> <span class="k">(</span>value <span class="k">&gt;&gt;</span> <span class="s">24</span><span class="k">)</span> <span class="k">&amp;</span> <span class="s">0xff</span><span class="k">;</span>			</code></pre>
      </td>
      <td width="25%">test/connection/message_parser_test.js :: Should correctly parse perfectly aligned message from socket<br/><br/>
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>	buffer<span class="k">[</span>index <span class="k">+</span> <span class="s">2</span><span class="k">]</span> <span class="k">=</span> <span class="k">(</span>value <span class="k">&gt;&gt;</span> <span class="s">16</span><span class="k">)</span> <span class="k">&amp;</span> <span class="s">0xff</span><span class="k">;</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>	buffer<span class="k">[</span>index <span class="k">+</span> <span class="s">1</span><span class="k">]</span> <span class="k">=</span> <span class="k">(</span>value <span class="k">&gt;&gt;</span> <span class="s">8</span><span class="k">)</span> <span class="k">&amp;</span> <span class="s">0xff</span><span class="k">;</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>	buffer<span class="k">[</span>index<span class="k">]</span> <span class="k">=</span> value <span class="k">&amp;</span> <span class="s">0xff</span><span class="k">;</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code><span class="k">}</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>exports<span class="k">.</span>encodeCString <span class="k">=</span> <span class="k">function</span><span class="k">(</span>string<span class="k">)</span> <span class="k">{</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>  <span class="k">var</span> buf <span class="k">=</span> <span class="k">new</span> Buffer<span class="k">(</span>string<span class="k">,</span> <span class="s">'utf8'</span><span class="k">);</span></code></pre>
      </td>
      <td width="25%">test/connection/message_parser_test.js :: Should correctly parse perfectly aligned message from socket<br/><br/>
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>  <span class="k">return</span> <span class="k">[</span>buf<span class="k">,</span> <span class="k">new</span> Buffer<span class="k">([</span><span class="s">0</span><span class="k">])];</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code><span class="k">}</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>exports<span class="k">.</span>decodeUInt32 <span class="k">=</span> <span class="k">function</span><span class="k">(</span>array<span class="k">,</span> index<span class="k">)</span> <span class="k">{</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>  <span class="k">return</span> array<span class="k">[</span>index<span class="k">]</span> <span class="k">|</span> array<span class="k">[</span>index <span class="k">+</span> <span class="s">1</span><span class="k">]</span> <span class="k">&lt;&lt;</span> <span class="s">8</span> <span class="k">|</span> array<span class="k">[</span>index <span class="k">+</span> <span class="s">2</span><span class="k">]</span> <span class="k">&lt;&lt;</span> <span class="s">16</span> <span class="k">|</span> array<span class="k">[</span>index <span class="k">+</span> <span class="s">3</span><span class="k">]</span> <span class="k">&lt;&lt;</span> <span class="s">24</span><span class="k">;</span></code></pre>
      </td>
      <td width="25%">test/connection/message_parser_test.js :: Should correctly parse perfectly aligned message from socket<br/><br/>
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code><span class="k">}</span></code></pre>
      </td>
      <td width="25%">test/connection/message_parser_test.js :: Should correctly parse perfectly aligned message from socket<br/><br/>test/connection/message_parser_test.js :: Should correctly parse message + in two packets from socket<br/><br/>test/connection/message_parser_test.js :: Should correctly parse message + in two packets from socket and smaller than 4 bytes additional one<br/><br/>
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code><span class="c">// Decode the int</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>exports<span class="k">.</span>decodeUInt8 <span class="k">=</span> <span class="k">function</span><span class="k">(</span>array<span class="k">,</span> index<span class="k">)</span> <span class="k">{</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code>  <span class="k">return</span> array<span class="k">[</span>index<span class="k">];</span></code></pre>
      </td>
      <td width="25%">test/connection/message_parser_test.js :: Should correctly parse perfectly aligned message from socket<br/><br/>
      </td>
    </tr>
    <tr>
      <td width="75%">
        <pre><code><span class="k">}</span></code></pre>
      </td>
      <td width="25%">
      </td>
    </tr>
  </table>
</body>